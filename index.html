<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Apple Music Glass Player</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div id="app-root">Player Loading…</div>

<!-- Charge l'application -->
<script src="app.js"></script>

<!-- Charge le Worklet correctement -->
<script>
(async () => {
  try {
      window.audioCtx = new (window.AudioContext || window.webkitAudioContext)();

      console.log("Chargement du worklet…");

      await audioCtx.audioWorklet.addModule("soundtouch-worklet.js");

      console.log("Worklet chargé.");

      // Signal à app.js qu'il peut démarrer
      window.dispatchEvent(new Event("worklet-ready"));
  } 
  catch (err) {
      console.error("Erreur Worklet :", err);
      document.getElementById("app-root").innerText = "Erreur Worklet : " + err;
  }
})();
</script>

</body>
</html>
